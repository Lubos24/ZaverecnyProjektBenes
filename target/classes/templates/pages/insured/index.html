<!DOCTYPE html>
<html lang="cs-cz" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head th:replace="~{fragments/layout.html :: head}"></head>

<!-- Šablona pro vykreslování pojištěnců -->
<body>
    <header th:replace="~{fragments/layout.html :: header}"></header>

    <!-- Flash Messages -->
    <div class="py-2 flash-message message-success" th:text="${success}" th:if="${success}"></div>
    <div class="py-2 flash-message message-error" th:text="${error}" th:if="${error}"></div>

    <!-- Stránka s šablonou -->
    <article class="container mt-4">
      <header>
          <h1>Pojištěnci</h1>
      </header>

      <section>
        <div id="centrovac">
            <div>
                <div class="container d-flex justify-content-center mt-5">
                   <p sec:authorize="hasRole('ADMIN')">
                     <a class="pridat-tlacitko" th:href="@{/insured/create}">Nový pojištěnec</a>
                   </p>
                </div>
            </div>
        </div>

        <!-- Šablona -->
        <div class="container mt-4">
             <table class="table table-striped table-hover">
                 <thead>
                    <tr>
                        <th>#</th>
                        <th>Jméno</th>
                        <th>Bydliště</th>
                        <th></th>
                    </tr>
                 </thead>
                 <tbody>
                    <tr th:each="insured, iterStat : ${insured}">
                        <td th:text="${iterStat.index + 1}">1</td>
                        <td><a th:href="@{'/insured/' + ${insured.insuredId}}" th:text="${insured.name + ' ' + insured.surname}">Jméno</a></td>
                        <td th:text="${insured.address}">Adresa</td>

                        <td>
                           <p sec:authorize="hasRole('ADMIN')">
                            <a th:href="@{/insured/edit/{id}(id=${insured.insuredId})}" class="btn btn-warning btn-sm">Editovat</a>
                            <a th:href="@{/insured/delete/{id}(id=${insured.insuredId})}" class="btn btn-danger btn-sm"
                               onclick="return confirm('Opravdu chcete odstranit tohoto pojištěnce?')">Odstranit</a>
                           </p>
                        </td>
                    </tr>
                 </tbody>
             </table>
        </div>
      </section>
    </article>

  <!-- Patička -->
  <footer th:replace="~{fragments/layout.html :: footer}"></footer>
 </body>
</html>