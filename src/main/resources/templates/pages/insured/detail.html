<!DOCTYPE html>
<html lang="cs-cz" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml"
      xmlns="http://www.w3.org/1999/html">

<head th:replace="~{fragments/layout.html :: head}"></head>

<!-- Šablona pro vykreslení detailu pojištěnce -->
<body>
    <header th:replace="~{fragments/layout.html :: header}"></header>

    <article class="container mt-4">
      <section>

            <!-- Levý sloupec s obrázkem -->
          <div class="row">
            <div class="col-md-2 d-flex flex-column align-items-start">
                <img th:src="@{/images/fotka.webp}" class="img-fluid" style="width: 100px; height: auto;" alt="Avatar pojištěnec"/>
            </div>

            <!-- Pravý sloupec s nadpisem a informacemi -->
            <div class="col-md-10">
                <h1 th:utext="${insured.name + ' ' + insured.surname}"></h1>
                <div class="row">
                    <div class="col-md-6">
                        <ul>
                            <li th:text="${insured.address}"></li>
                            <li th:text="${insured.city}"></li>
                            <li th:text="${insured.postcode}"></li>
                        </ul>
                    </div>

                    <div class="col-md-6">
                        <ul>
                            <li th:text="${insured.email}"></li>
                            <li th:text="${insured.phone}"></li>
                        </ul>
                    </div>
                </div>
            </div>
          </div>

          <!-- Tabulka sjednaných pojištění -->
          <h2 class="mt-4">Sjednaná pojištění</h2>
          <table class ="table table-striped table-hover">
             <thead>
               <tr>
                <th>Pojištění</th>
                <th>Částka</th>
                <th></th>
               </tr>
             </thead>
             <tbody>
               <tr th:each="insurance : ${insurance}">
                <td th:text="${insurance.name}"></td>
                <td th:text="${insurance.price}"></td>
                <!-- Tlačítka pro úpravu -->
                <td>
                 <p sec:authorize="hasRole('ADMIN')">
                    <a th:href="@{/insurance/edit/{id}(id=${insurance.insuranceId})}" class="btn btn-warning btn-sm">Editovat</a>
                    <a th:href="@{/insurance/delete/{id}(id=${insurance.insuranceId})}" class="btn btn-danger btn-sm"
                       onclick="return confirm('Opravdu chcete odstranit toto pojištění?')">Odstranit</a>
                 </p>
                </td>
               </tr>
             </tbody>
          </table>

           <!-- Tlačítka pro úpravu -->
           <div>
            <div class="container d-flex justify-content-center mt-5">
                 <p sec:authorize="hasRole('ADMIN')">
                     <a th:href="@{/insured/assign/{id}(id=${insured.insuredId})}" class="btn btn-info btn-sm">Přidat pojištění</a>
                     <a th:href="@{/insured/edit/{id}(id=${insured.insuredId})}" class="btn btn-warning btn-sm">Editovat pojištěnce</a>
                     <a th:href="@{/insured/delete/{id}(id=${insured.insuredId})}" class="btn btn-danger btn-sm"
                     onclick="return confirm('Opravdu chcete odstranit tohoto pojištěnce?')">Odstranit pojištěnce</a>
                 </p>
            </div>
           </div>
      </section>
    </article>

    <!-- Patička -->
   <footer th:replace="~{fragments/layout.html :: footer}"></footer>
 </body>
</html>